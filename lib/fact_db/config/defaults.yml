# FactDb Bundled Defaults
#
# This file is the SINGLE SOURCE OF TRUTH for FactDb configuration schema.
# All attributes must be declared here (even if nil) to be recognized.
# It is bundled with the gem and loaded automatically at lowest priority.
#
# Loading priority (lowest to highest):
# 1. This file (bundled defaults)
# 2. XDG user config (~/.config/fact_db/fact_db.yml)
# 3. Project config (./config/fact_db.yml)
# 4. Local overrides (./config/fact_db.local.yml)
# 5. Environment variables (FDB_*)
# 6. Programmatic (FactDb.configure block)
#
# Structure:
# - defaults: Base values for all environments (with nested sections)
# - development: Overrides for development environment
# - test: Overrides for test environment
# - production: Overrides for production environment
# - demo: Overrides for demo/staging environment
#
# Custom Environments:
# Your application's config file (./config/fact_db.yml) can define additional
# environments to suit your infrastructure. For example:
#   staging:
#     database:
#       name: myapp_staging
#   qa:
#     database:
#       name: myapp_qa
#
# Environment helper methods (e.g., config.staging?, config.qa?) are
# automatically generated for any environment defined in configuration files.
#
# Access pattern:
#   FactDb.config.database.url
#   FactDb.config.database.pool
#   FactDb.config.llm.provider
#   FactDb.config.ranking.ts_rank_weight

# =============================================================================
# Shared Defaults (base for all environments)
# =============================================================================
defaults:
  # ---------------------------------------------------------------------------
  # Database Configuration (ActiveRecord-compatible keys)
  # Access: FactDb.config.database.url, FactDb.config.database.pool, etc.
  # ---------------------------------------------------------------------------
  database:
    adapter: postgresql
    url: ~
    host: localhost
    port: 5432
    name: fact_db_demo
    username: ~
    password: ~
    pool: 5
    timeout: 30000
    encoding: "unicode"
    prepared_statements: false
    advisory_locks: false

  # ---------------------------------------------------------------------------
  # Embedding Configuration
  # Access: FactDb.config.embedding.generator, FactDb.config.embedding.dimensions
  # ---------------------------------------------------------------------------
  embedding:
    generator: ~
    dimensions: 1536

  # ---------------------------------------------------------------------------
  # LLM Configuration
  # Access: FactDb.config.llm.provider, FactDb.config.llm.model, etc.
  # ---------------------------------------------------------------------------
  llm:
    client: ~
    provider: ~
    model: ~
    api_key: ~

  # ---------------------------------------------------------------------------
  # Ranking Signal Weights
  # Access: FactDb.config.ranking.ts_rank_weight, etc.
  # Weights should sum to approximately 1.0 for normalized scores
  # ---------------------------------------------------------------------------
  ranking:
    ts_rank_weight: 0.25
    vector_similarity_weight: 0.25
    entity_mention_weight: 0.15
    direct_answer_weight: 0.15
    term_overlap_weight: 0.10
    relationship_match_weight: 0.05
    confidence_weight: 0.05

  # ---------------------------------------------------------------------------
  # General Settings
  # Access: FactDb.config.default_extractor, FactDb.config.log_level, etc.
  # ---------------------------------------------------------------------------
  default_extractor: manual
  fuzzy_match_threshold: 0.85
  auto_merge_threshold: 0.95
  log_level: info

# =============================================================================
# Development Environment Overrides
# =============================================================================
development:
  database:
    name: fact_db_development
  log_level: debug

# =============================================================================
# Test Environment Overrides
# =============================================================================
test:
  database:
    name: fact_db_test
    pool: 2
    timeout: 5000
  log_level: warn

# =============================================================================
# Production Environment Overrides
# =============================================================================
production:
  database:
    name: fact_db_production
    pool: 10
    timeout: 60000
  log_level: warn

# =============================================================================
# Demo Environment Overrides
# =============================================================================
demo:
  database:
    name: fact_db_demo
    pool: 3
  log_level: info

# -----------------------------------------------------------------------------
# Add your own environments for your project's infrastructure
# -----------------------------------------------------------------------------
# qa:
# staging:
